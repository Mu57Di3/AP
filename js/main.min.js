!function t(e,a,i){function n(r,l){if(!a[r]){if(!e[r]){var p="function"==typeof require&&require;if(!l&&p)return p(r,!0);if(s)return s(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var c=a[r]={exports:{}};e[r][0].call(c.exports,function(t){var a=e[r][1][t];return n(a?a:t)},c,c.exports,t,e,a,i)}return a[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,a){var i=Marionette.Application.extend({el:"body",curentId:-1}),n=Backbone.Marionette.LayoutView.extend({template:"js/templates/main.twig",regions:{player:"#player",playlist:"#playlist"},events:{},onShow:function(){var e=t("./view/Playlist");app.playlist=t("./model/playlist"),app.playlist.fetch(),this.getRegion("playlist").show(new e({collection:app.playlist}));var a=t("./view/Player");this.getRegion("player").show(new a)}});app=new i,app.addRegions({app:".container"}),app.on("start",function(){this.MainView=new n,this.getRegion("app").show(this.MainView)}),app.start()},{"./model/playlist":2,"./view/Player":3,"./view/Playlist":4}],2:[function(t,e,a){var i=Backbone.Model.extend({defaults:{title:"",artist:"",albom:"",year:1960,url:""}}),n=Backbone.Collection.extend({model:i,fetch:function(){var t=this;$.getJSON("./playlist.json",function(e){_.each(e,function(e){t.add(new i(e))})})}});e.exports=new n},{}],3:[function(t,e,a){var i=Marionette.ItemView.extend({template:"js/templates/player.twig",song:{},player:null,duration:0,events:{"click #bPlay":"play","click #bStop":"stop","click #bForward":"forvard","click #pBack":"backward"},test:function(){this.player&&(this.player.pause(),this.player.stop(),this.player=null),app.curentId--,this.play()},initialize:function(t){if(void 0!=t&&t.length>0)for(var e=Object.keys(t),a=0,i=e.length;i>a;a++)this[e[a]]=t[e[a]];var n=this;$(app).on("playlist:select",function(){n.test()})},_setplayer:function(t){var e=this;this.player&&(this.player.pause(),this.player.stop(),this.player=null,this._setProgres(0)),this.player=new AV.Player.fromURL(t),this.player.on("progress",function(t){var a=e.player;if(a.duration>0){var i=Math.round(a.currentTime/a.duration*100);e._setProgres(i)}}),this.player.on("duration",function(t){this.duration=t}),this.player.on("end",function(){e.forvard()})},_setPlayIco:function(){var t=$("#bPlay i");t.removeClass("glyphicon-pause"),t.addClass("glyphicon-play")},_setPauseIco:function(){var t=$("#bPlay i");t.removeClass("glyphicon-play"),t.addClass("glyphicon-pause")},_setProgres:function(t){$(".progress-bar").css("width",t+"%")},_setName:function(t,e){$("#sTitle").text(t),$("#sArtist").text(e)},_initSong:function(){app.curentId++,app.curentId>app.playlist.length&&(app.curentId=0),this.song=app.playlist.at(app.curentId),this._setName(this.song.get("title"),this.song.get("artist"))},_setMarck:function(){$("tr.bg-primary").removeClass("bg-primary"),$("table tr:nth-child("+(app.curentId+1)+")").addClass("bg-primary")},play:function(){null==this.player&&(this._initSong(),this._setplayer(this.song.get("url")),this._setMarck()),this.player.playing?(this.player.pause(),this._setPlayIco()):(this.player.play(),this._setPauseIco())},stop:function(){null!=this.player&&(this.player.pause(),this.player.stop(),this.player=null,this._setProgres(0),this._setName("",""),this._setPlayIco(),app.curentId--)},forvard:function(){this.stop(),app.curentId++,app.curentId>=app.playlist.length-1&&(app.curentId=-1),this.play()},backward:function(){this.stop(),app.curentId--,app.curentId<-1&&(app.curentId=app.playlist.length-2),this.play()}});e.exports=i},{}],4:[function(t,e,a){var i=Marionette.ItemView.extend({tagName:"tr",template:"js/templates/song.twig",events:{click:"itemClick"},itemClick:function(t){app.curentId=this._index,$(app).trigger("playlist:select")}}),n=Marionette.CollectionView.extend({tagName:"table",childView:i,className:"table",onShow:function(){}});e.exports=n},{}]},{},[1]);